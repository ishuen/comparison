doctype html
html
  head
    title= 'analysis - sorting procedures'
    meta(name='viewport' content='width=device-width, initial-scale=1')
    link(rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css')
  body
    script(src='http://d3js.org/d3.v3.min.js', charset='utf-8')
    script(src='https://code.jquery.com/jquery-3.3.1.min.js', charset='utf-8')
    script(src='/scripts/analysis.js', type='text/javascript')
    script(src="https://cdn.plot.ly/plotly-latest.min.js", charset='utf-8')
    script.
      let procedures = !{JSON.stringify(procedures)}
      //- let results = !{JSON.stringify(results)}
      //- console.log(procedures, results)
    div(class='container')
      div(class='col-sm-7')
        table(class='table' style='table-layout: fixed;')
          tr
            td
            - var i = 1
            while i < 11
              td #{i}
              - i++
          - var j = 0
          - let length = Object.keys(procedures).length
          - let keyArr = Object.keys(procedures).sort(function(a, b){ return Date.parse(a) - Date.parse(b) })
          each item in keyArr
            - let k = 0
            tr
              td
                | #{procedures[item][0]['record_number']}
                //- | - #{item}
              while k < 10
                if k < procedures[item].length
                  td 
                    span(style='color: red') #{procedures[item][k]['new_taste']}
                    | :
                    span(style='color: green') #{procedures[item][k]['new_health']}
                    br
                    | (#{procedures[item][k]['ordering'] + 1})
                else
                  td
                - k++
    script.
      //- function replaceRow (procedures, results, rowId) {
      //-   let new_row = '<'
      //-   $('#sort').replaceWith(new_row)
      //- }
