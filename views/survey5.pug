doctype html
html
  head
    title= 'experiment 2 - postsurvey'
    link(rel='stylesheet', href='/stylesheets/style.css')
    link(rel='stylesheet', href='/stylesheets/surveys.css')
    link(rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css')
  body
    script(src='http://d3js.org/d3.v3.min.js', charset='utf-8')
    script(src='https://code.jquery.com/jquery-3.3.1.min.js', charset='utf-8')
    script(src='/scripts/questionSets.js', type='text/javascript')
    script.
      let data = !{JSON.stringify(data)}
    - var setDesc = data[0].description // index 0 = display num 0
    h1 Post-Experiment Survey â€“ Experiment 2
    br
    h2 Overall opinion about the sorted list
    h3 #{setDesc}
    form(id='form', action='/survey5/' + trial + '/' + userId, method='post', onsubmit='return validateExpForm()')
      input(type='hidden', name='trial', value=trial)
      input(type='hidden', name='userId', value=userId)
      table.expLikert
        col(width='30%')
        tr
          th
          th Strongly disagree
          th Disagree
          th Neither agree nor disagree
          th Agree
          th Strongly agree
        - var firstSet = data.filter(d => d.qn_set == 8).sort(function (a, b) {return a.qn_id > b.qn_id })
        - firstSet = firstSet.slice(1)
        - var i = 0
        while i < firstSet.length
          tr
          td #{firstSet[i].description}
            if firstSet[i].ans_type == '5_scale'
              each val in [1, 2, 3, 4, 5]
                td
                  input(name='qn' + firstSet[i].qn_id, type='radio', value= val)
            else
              td(colspan='5')
                input(name='qn' + firstSet[i].qn_id, type='text', style='width: 100%')
          - i++
      br
      h2 Others
      - var secondSet = data.filter(d => d.qn_set == 9)
      h3 #{secondSet[0].description}
      - var choice = ['item name or image', 'taste score', 'health score', 'Other (please specify)']
      - var val = 0
      while val < choice.length
        label 
          input(type='radio', name='qn' + secondSet[0].qn_id, value=choice[val])
          span #{choice[val]}
          if val == choice.length - 1
            input(type='text', name='others')
        br
        - val++
      h3 #{secondSet[1].description}
      textarea(name='qn' + secondSet[1].qn_id, rows='4', style='width: 80%;')
      br
      button(class='surSubmit', type='submit', value='submit') Submit